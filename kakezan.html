<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>計算クイズ</title>
    <style>
      body {
        width: auto;
        height: auto;
      }
    </style>
  </head>
  <body>
    <h1>計算クイズ</h1>
    <br />
    <p>どれか選んでね</p>
    <div id="quiz">
      <hr align="center" size="5px" width="auto" />
      <div id="quiz-container">
        <input type="button" onclick="startQuiz('plus')" value="たしざん">
        <input type="button" onclick="startQuiz('minus')" value="ひきざん">
        <br>
        <input type="button" onclick="startQuiz('times')" value="かけざん">
        <input type="button" onclick="startQuiz('divide')" value="わりざん">
      </div>
    </div>

    <script>
      let currentAnswer = 0;

      function startQuiz(type) {
        let num1, num2, questionText;
        const quizContainer = document.getElementById('quiz-container');

        if (type === 'plus') {
          num1 = Math.floor(Math.random() * 100);
          num2 = Math.floor(Math.random() * 100);
          questionText = `${num1} + ${num2} = ?`;
          currentAnswer = num1 + num2;
        } else if (type === 'minus') {
          num1 = Math.floor(Math.random() * 100);
          num2 = Math.floor(Math.random() * 100);
          // 引き算でマイナスにならないようにする
          if (num1 < num2) {
            [num1, num2] = [num2, num1]; // num1とnum2を入れ替える
          }
          questionText = `${num1} - ${num2} = ?`;
          currentAnswer = num1 - num2;
        } else if (type === 'times') {
          num1 = Math.floor(Math.random() * 9) + 1;
          num2 = Math.floor(Math.random() * 9) + 1;
          questionText = `${num1} × ${num2} = ?`;
          currentAnswer = num1 * num2;
        } else if (type === 'divide') {
          num2 = Math.floor(Math.random() * 9) + 1;
          let tempResult = Math.floor(Math.random() * 9) + 1;
          num1 = num2 * tempResult; // 割り切れるようにする
          questionText = `${num1} ÷ ${num2} = ?`;
          currentAnswer = tempResult;
        }

        quizContainer.innerHTML = `
          <p>${questionText}</p>
          <input type="number" id="user-answer">
          <br>
          <input type="button" onclick="checkAnswer('${type}')" value="こたえる">
          <p id="result"></p>
        `;
      }

      function checkAnswer(type) {
        const userAnswer = document.getElementById('user-answer').value;
        const resultParagraph = document.getElementById('result');

        if (parseInt(userAnswer, 10) === currentAnswer) {
          resultParagraph.innerText = 'せいかい！';
        } else {
          resultParagraph.innerText = `ざんねん！せいかいは ${currentAnswer} です。`;
        }

        // 次の問題を出すボタンを追加
        resultParagraph.innerHTML += `<br><input type="button" onclick="startQuiz('${type}')" value="次の問題へ">`;
      }
    </script>
  </body>
</html>
